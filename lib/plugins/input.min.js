!function(o,m){var s,f={};function i(t,a){if(!t)return!1;switch(t){case"file":this.addEventListener("change",function(t){for(var a=this.files,e=a.length,i=[];e--;)i.unshift(a[e].name);this.dataset.file=i.join(" | ")});break;case"calendar":this.addEventListener("click",function(t){var n,c,l;t.stopPropagation(),(s=s||((l=m.createElement("DIV")).className="calendar",l.innerHTML='<ul class="cols">\t\t\t\t\t\t\t  \t<li>日</li><li>一</li><li>二</li><li>三</li><li>四</li><li>五</li><li>六</li>\t\t\t\t\t\t\t  </ul>\t\t\t\t\t\t\t  <ul class="calendar-days"></ul>\t\t\t\t\t\t\t  <div class="calendar-selector"></div>\t\t\t\t\t\t\t  <ul class="calendar-years"></ul>\t\t\t\t\t\t\t  <ul class="calendar-months"></ul>',m.body.append(l),f={selector:l.querySelector(".calendar-selector"),years:l.querySelector(".calendar-years"),months:l.querySelector(".calendar-months"),days:l.querySelector(".calendar-days")},l.addEventListener("click",function(t){t.stopPropagation();var a=t.target,e=a.dataset,i=l.$input;switch(!1){case!e.date:var s=a.dataset.month,s=f.month+("prev"===s?-2:"next"===s?0:-1);i.value=o.time(new Date(f.year,s,e.date),"Y-M-D"),o(this).toggle(!1);break;case!e.years:r(n=f.year,n),f.years.classList.add("active");break;case!e.months:f.months.classList.add("active");break;case!e.year:a.classList.contains("active")?f.years.classList.remove("active"):d(new Date(e.year,f.month-1,1),f.time);break;case!e.month:a.classList.contains("active")?f.months.classList.remove("active"):d(new Date(f.year,e.month-1,1),f.time);break;case!e.pny:r(n+="prev"===e.pny?-10:10,f.year);break;case!e.pnm:c=(c%12||f.month)+("prev"===e.pnm?-1:1),d(new Date(f.year,c-1,1),f.time),c=null}}),l)).classList.contains("active")&&s.$input===this||(t=new Date(this.value.trim()),s.$input=this,t.getDate()?d(t,t):d(new Date),u(this),o(s).toggle(!0))});break;case"editor":!function(){this.classList.add("editor-container");{var t;m.getElementById("editor-popups")||((t=m.createElement("DIV")).setAttribute("id","editor-popups"),t.innerHTML='\t\t\t\t\t\t\t<div class="backdrop" masiv-dismiss="#editor-link"><div id="editor-link" class="dialog"><form name="editor-link" class="content"><div class="field"><label class="label-inline"><span class="label">文本:</span><input type="text" class="input" name="text"></label></div><div class="field"><label class="label-inline"><span class="label">链接:</span><input type="text" class="input" name="link"></label></div><div class="field"><label class="label-checkbox"><input type="checkbox" class="checkbox" checked name="target">新窗口打开</label></div></form><footer><a class="btn black-o right" data-act="insert-link" masiv-dismiss="#editor-link" data-name="link">插入链接</a></footer></div></div>\t\t\t\t\t\t\t<div class="backdrop" masiv-dismiss="#editor-image"><div id="editor-image" class="dialog"><form name="editor-image" class="content"><div class="field"><label class="label-inline"><span class="label">图片链接:</span><input type="text" class="input" name="link"></label></div></form><footer><a class="btn black-o right" data-act="insert-image" masiv-dismiss="#editor-image" data-name="image">插入图片</a></footer></div></div>\t\t\t\t\t\t\t<div class="backdrop" masiv-dismiss="#editor-table"><div id="editor-table" class="dialog"><form name="editor-table" class="content"><div class="field"><label class="label-inline"><span class="label">列:</span><input type="text" class="input" name="col" value="4"></label></div><div class="field"><label class="label-inline"><span class="label">行:</span><input type="text" class="input" name="row" value="3"></label></div></form><footer><a class="btn black-o right" data-act="insert-table" masiv-dismiss="#editor-table" data-name="table">插入表格</a></footer></div></div>\t\t\t\t\t\t\t',e.call(t),m.body.append(t))}this.innerHTML='<div class="editor-toolbar">\t\t\t\t\t\t\t<a class="editor-item iconfont icon-undo" data-act="undo"></a>\t\t\t\t\t\t\t<a class="editor-item iconfont icon-redo" data-act="redo"></a>\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div masiv-dropdown><a class="editor-item iconfont icon-heading"></a><div class="dropmenu"><a class="li" data-act="heading" data-heading="h1"><b>H1</b></a><a class="li" data-act="heading" data-heading="h2"><b>H2</b></a><a class="li" data-act="heading" data-heading="h3"><b>H3</b></a><a class="li" data-act="heading" data-heading="h4"><b>H4</b></a><a class="li" data-act="heading" data-heading="h5"><b>H5</b></a><a class="li" data-act="heading" data-heading="h6"><b>H6</b></a></div></div>\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div masiv-dropdown><a class="editor-item iconfont icon-fontsize"></a><div class="dropmenu"><div class="group"><div class="select" masiv-dropmenu><input type="text" class="input" value="14"><span class="caret"></span><ul class="dropmenu"><li class="li" data-value="14">14</li><li class="li" data-value="16">16</li><li class="li" data-value="24">24</li></ul></div><i class="btn black-o" data-act="size">px</i></div></div></div>\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div masiv-dropdown><a class="editor-item iconfont icon-fontcolor"></a><div class="dropmenu"><div class="group"><i class="iconfont icon-hashtag"></i><input type="text" class="input" maxlength="8"><a class="btn black-o" data-act="color-font"><i class="iconfont icon-fontcolor"></i></a></div><div class="editor-colors"><a data-act="color" data-color="2a2a2a" style="background: #2a2a2a;"></a><a data-act="color" data-color="258de6" style="background: #258de6;"></a><a data-act="color" data-color="fcea4d" style="background: #fcea4d;"></a><a data-act="color" data-color="19a054" style="background: #19a054;"></a><a data-act="color" data-color="dd0a35" style="background: #dd0a35;"></a><a data-act="color" data-color="fff" style="background: #fff;"></a><a data-act="color" data-color="808080" style="background: #808080;"></a></div></div></div>\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div masiv-dropdown><a class="editor-item iconfont icon-brush"></a><div class="dropmenu"><div class="group"><i class="iconfont icon-hashtag"></i><input type="text" class="input" maxlength="8"><a class="btn black-o" data-act="color-background"><i class="iconfont icon-brush"></i></a></div><div class="editor-colors"><a data-act="background" data-color="2a2a2a" style="background: #2a2a2a;"></a><a data-act="background" data-color="a5d5ff" style="background: #a5d5ff;"></a><a data-act="background" data-color="fcea4d" style="background: #fcea4d;"></a><a data-act="background" data-color="9cffc8" style="background: #9cffc8;"></a><a data-act="background" data-color="ffa9a9" style="background: #ffa9a9;"></a><a data-act="background" data-color="fff" style="background: #fff;"></a><a data-act="background" data-color="d2d2d2" style="background: #d2d2d2;"></a></div></div></div>\t\t\t\t\t\t\t\t\t\t\t\t\t\t<a class="editor-item iconfont icon-fontweight" data-act="bold"></a>\t\t\t\t\t\t\t<a class="editor-item iconfont icon-fontstyle" data-act="italic"></a>\t\t\t\t\t\t\t<a class="editor-item iconfont icon-underline" data-act="underline"></a>\t\t\t\t\t\t\t<a class="editor-item iconfont icon-strike" data-act="strike"></a>\t\t\t\t\t\t\t<a class="editor-item iconfont icon-list-disc" data-act="disorder"></a>\t\t\t\t\t\t\t<a class="editor-item iconfont icon-list-deci" data-act="order"></a>\t\t\t\t\t\t\t<a class="editor-item iconfont icon-eraser" data-act="eraser"></a>\t\t\t\t\t\t\t<a class="editor-item iconfont icon-align-left" data-act="align-left"></a>\t\t\t\t\t\t\t<a class="editor-item iconfont icon-align-center" data-act="align-center"></a>\t\t\t\t\t\t\t<a class="editor-item iconfont icon-align-right" data-act="align-right"></a>\t\t\t\t\t\t\t<a class="editor-item iconfont icon-align-justify" data-act="align-justify"></a>\t\t\t\t\t\t\t<a class="editor-item iconfont icon-link" data-act="link" masiv-dialog="#editor-link"></a>\t\t\t\t\t\t\t<a class="editor-item iconfont icon-image" data-act="image" masiv-dialog="#editor-image"></a>\t\t\t\t\t\t\t<a class="editor-item iconfont icon-table" data-act="table" masiv-dialog="#editor-table"></a>\t\t\t\t\t\t\t<a class="editor-item iconfont icon-fullscreen right" data-act="fullscreen"></a>\t\t\t\t\t\t</div>\t\t\t\t\t\t<div class="editor" contenteditable></div>'}.call(this),e.call(this)}}function e(){this.addEventListener(o.eventAlias.click,function(t){for(var a=t.target;this!==a;)a.matches("[data-act]")&&function(t,a){var e=t.dataset.act,i=m.getElementById("editor-popups");switch(e){case"undo":m.execCommand("undo");break;case"redo":m.execCommand("redo");break;case"heading":m.execCommand("formatBlock",!1,t.dataset.heading);break;case"size":var s=t.previousElementSibling.querySelector("input");m.execCommand("insertHTML",m.getSelection(),'<font style="font-size:'+s.value+'px;">'+m.getSelection()+"</font>");break;case"color":m.execCommand("foreColor",!1,t.dataset.color);break;case"color-font":var n=(s=t.previousElementSibling).value||"";/(^[0-9A-F]{6}$)|(^[0-9A-F]{3}$)/i.test(n)&&(m.execCommand("foreColor",!1,n),s.previousElementSibling.style.color="#"+n);break;case"background":m.execCommand("backColor",!1,t.dataset.color);break;case"color-background":n=(s=t.previousElementSibling).value||"";/(^[0-9A-F]{6}$)|(^[0-9A-F]{3}$)/i.test(n)&&(m.execCommand("backColor",!1,n),s.previousElementSibling.style.background="#"+n);break;case"bold":m.execCommand("bold");break;case"italic":m.execCommand("italic");break;case"underline":m.execCommand("underline");break;case"strike":m.execCommand("strikeThrough");break;case"eraser":m.execCommand("removeFormat");break;case"disorder":m.execCommand("insertUnorderedList");break;case"order":m.execCommand("insertOrderedList");break;case"align-left":m.execCommand("justifyLeft");break;case"align-center":m.execCommand("justifyCenter");break;case"align-right":m.execCommand("justifyRight");break;case"align-justify":m.execCommand("justifyFull");break;case"fullscreen":a.classList.toggle("full");break;case"link":case"image":case"table":var c=m.getSelection();i.cacheRange={startnode:c.anchorNode,startoffset:c.anchorOffset,endnode:c.focusNode,endoffset:c.focusOffset},"link"===e&&(m.forms["editor-link"].text.value=c.toString());break;case"insert-link":case"insert-image":case"insert-table":var l=t.dataset.name,o=m.forms["editor-"+l],s=i.cacheRange;if({link:o.link&&o.text,image:o.link,table:o.col&&o.row}[l]){(c=m.getSelection()).removeAllRanges();n=m.createRange();switch(n.setStart(s.startnode||a,s.startoffset||0),n.setEnd(s.endnode||a,s.endoffset||0),c.addRange(n),l){case"link":m.execCommand("insertHTML",c,'<a href="'+o.link.value+'"'+(o.target.checked?' target="_blank">':">")+o.text.value+"</a>");break;case"image":m.execCommand("insertHTML",c,'<img src="'+o.link.value+'">');break;case"table":var d='<div class="table-container"><table class="table">',r="<tr>"+"<td></td>".repeat(o.col.value)+"</tr>";d+=r.repeat(o.row.value)+"</table></div>",m.execCommand("insertHTML",c,d)}c.removeAllRanges()}}}(a,this),a=a.parentNode})}function d(t,a){f.years.classList.remove("active"),f.months.classList.remove("active");var e,i,s=t.getFullYear(),n=t.getMonth()+1;e=s,i=n,f.selector.innerHTML='<a data-pnm="prev" class="iconfont icon-left"></a>\t\t\t\t\t\t\t\t\t   <a data-years="'+e+'">'+e+'年</a>\t\t\t\t\t\t\t\t\t   <a data-months="'+i+'">'+i+'月</a>\t\t\t\t\t\t\t\t\t   <a data-pnm="next" class="iconfont icon-right"></a>',function(t,a){for(var e="",i=t.getFullYear(),s=t.getMonth(),n=new Date(i,s,1),c=new Date(i,s+1,0),l=!(!a||a.getMonth()!==s||a.getFullYear()!==i)&&a.getDate(),o=c.getDate();o;)e='<li data-date="'+o+'"'+(l===o?' class="active">':">")+o+"</li>"+e,--o;var d=n.getDay();if(0<d){n=new Date(i,s,0),t=n.getDate();s=n.getMonth();for(var r=!(l||!a||a.getMonth()!==s||a.getFullYear()!==i)&&a.getDate();d--;)e='<li data-date="'+t+'" data-month="prev" class="diffmon'+(r===t?' active">':'">')+t+"</li>"+e,--t}var m=c.getDay();if(6!==m){c=new Date(i,s+1,1),t=1;s=c.getMonth();for(r=!(l||!a||a.getMonth()!==s||a.getFullYear()!==i)&&a.getDate();6!==m;)e+='<li data-date="'+t+'" data-month="next" class="diffmon'+(r===t?' active">':'">')+t+"</li>",++m,++t}f.days.innerHTML=e}(t,a),function(t){for(var a=1,e="";a<13;a++)e+='<li data-month="'+a+'"'+(a===t?' class="active">':">")+a+"</li>";f.months.innerHTML=e}(n),r(s,a&&a.getFullYear()),f.year=s,f.month=n,f.time=a}function r(t,a){for(var e='<li data-year="'+t+(a&&t===a?'" class="active">':'">')+t+"</li>",i=t;i%10!=0;)e='<li data-year="'+--i+'">'+i+"</li>"+e;for(;t%10!=9;)e+='<li data-year="'+ ++t+'">'+t+"</li>";f.years.innerHTML=e+'<li data-pny="prev" class="iconfont icon-left"></li><li data-pny="next" class="iconfont icon-right"></li>'}function u(t){var a=s.offsetHeight,e=s.offsetWidth,i=o.pos(t),t=t.getBoundingClientRect(),e=t.left+e>s.parentNode.clientWidth?i.left+t.width-e:i.left,t=t.bottom+a>s.parentNode.clientHeight?i.top-a:i.top+t.height;s.style.cssText="left:"+e+"px;top:"+t+"px;"}m.body.getAttribute("masiv-namespace"),o.MASIV.input=function(a,e){return e=e||{},this.each(function(t){i.call(t,a||t.getAttribute("masiv-input"),e)})},o("[masiv-input]").input(),m.addEventListener("click",function(){s&&o(s).toggle(!1)}),window.addEventListener("resize",o.throttle(function(){s&&s.classList.contains("on")&&u(s.$input)}))}(M,document);