!function(y,h){function i(e,t){var r,l,i,n,s,a,o,c,u,d,p,f,v,m=e.dataset;this.$sets=y.extend({title:m.title||"",src:m.src,control:"false"!==m.control,time:!0,vol:.5,play:'<i class="iconfont icon-play"></i>',pause:'<i class="iconfont icon-pause"></i>',stop:'<i class="iconfont icon-stop"></i>',volume:'<i class="iconfont icon-volume"></i>',mute:'<i class="iconfont icon-mute"></i>',fullscreen:'<i class="iconfont icon-fullscreen"></i>',exitfull:'<i class="iconfont icon-fullscreen-exit"></i>',forward:'<i class="iconfont icon-forward"></i>',backward:'<i class="iconfont icon-backward"></i>',color:"blue",forwardUnit:3,tip:!0},t),o=e,m=(u=this).$sets,u="<video",m.src.length&&(m.src=function(e){if("string"!=typeof e)return e;var t=[];e=e.split(",");for(var r=0,l=e.length;r<l;r++)t.push(e[r].trim());return t}(m.src),o.removeAttribute("data-src"),u+=' src="'+m.src[0]+'"'),!1!==m.loop&&void 0!==m.loop&&(o.removeAttribute("data-loop"),u+=' loop="loop"'),!m.preload&&!0!==m.preload||(o.removeAttribute("data-preload"),u+=' preload="'+m.preload+'"'),m.poster&&(o.removeAttribute("data-poster"),u+=' poster="'+m.poster+'"'),u+="><i>MASIV VIDEO</i></video>",m.title&&(u+='<div class="player-title" title="'+m.title+'">'+m.title+"</div>"),m.control&&(o.removeAttribute("data-control"),u+='<div class="player-controls">                        <div class="progress player-progress"><div class="bar '+m.color+'" style="width:0;"></div></div>'+(m.play?'<a class="player-act player-play">'+m.play+"</a>":"")+'                        <span class="player-time"></span>'+(m.stop?'<a class="player-act player-stop">'+m.stop+"</a>":"")+(m.volume?'<div class="player-widget">                                        <a class="player-act player-mute">'+m.volume+'</a>                                        <div class="player-popup"><div class="progress player-volume"><div class="bar '+m.color+'" style="height:0;"></div></div></div>                                     </div>':"")+(m.fullscreen?'<a class="player-act player-full">'+m.fullscreen+"</a>":"")+"</div>"),m.tip&&(u+='<div class="player-tip"></div>'),o.classList.add("player"),o.innerHTML=u,l=e,f=(r=this).$sets,v=r.player=l.firstChild,(l.$player=r).playlist=f.src,r.isFullScreen=!1,r.inform=F,v.volume=f.vol,f.control&&(v.addEventListener("loadedmetadata",function(){i=r.duration=S(this.duration)}),t=l.querySelector(".player-controls"),n=t.querySelector(".player-time"),s=t.querySelector(".player-play"),m=t.querySelector(".player-progress"),a=m.firstChild,o=t.querySelector(".player-stop"),c=t.querySelector(".player-mute"),u=t.querySelector(".player-volume"),d=u.firstChild,p=t.querySelector(".player-full"),e=l.querySelector(".player-tip"),r.tip=e,t.addEventListener("click",function(e){e.stopPropagation()}),l.addEventListener("click",function(){L.call(v)}),s&&(s.addEventListener("click",L.bind(v)),v.addEventListener("play",function(){s.innerHTML=f.pause}),v.addEventListener("pause",function(){s.innerHTML=f.play})),m.addEventListener("mousedown",function(e){e=e.offsetX;v.currentTime=v.duration*e/this.offsetWidth}),v.addEventListener("timeupdate",function(){f.time&&(n.innerHTML=S(this.currentTime)+" / "+i),a.style.width=100*this.currentTime/this.duration+"%"}),o&&o.addEventListener("click",function(){v.currentTime=0,v.pause()}),c&&(c.addEventListener("click",function(){v.muted=!v.muted}),u.addEventListener("mousedown",function(e){e=e.offsetY;v.volume=e/this.offsetHeight}),v.addEventListener("volumechange",function(){var e=Math.round(100*v.volume);d.style.height=e+"%",v.muted?(c.innerHTML=f.mute,r.inform(f.mute)):(c.innerHTML=f.volume,r.inform(f.volume+": "+e+"%"))})),p&&(h.addEventListener("fullscreenchange",function(){r.isFullScreen=!r.isFullScreen,p.innerHTML=r.isFullScreen?f.exitfull:f.fullscreen}),p.addEventListener("click",function(){var e;r.isFullScreen?h.exitFullscreen&&h.exitFullscreen()||h.msExitFullscreen&&h.msExitFullscreen()||h.mozCancelFullScreen&&h.mozCancelFullScreen()||h.webkitExitFullscreen&&h.webkitExitFullscreen():(e=l).requestFullscreen&&e.requestFullscreen()||e.mozRequestFullScreen&&e.mozRequestFullScreen()||e.webkitRequestFullscreen&&e.webkitRequestFullscreen()||e.msRequestFullscreen&&e.msRequestFullscreen()}))),h.addEventListener("keydown",function(e){if(r.isFullScreen){e.preventDefault();var e=e.keyCode||e.which,t=v.volume;switch(e){case 32:L.call(v);break;case 37:v.currentTime-=f.forwardUnit;break;case 38:v.muted=!1,t+=.1,v.volume=1<t?1:t;break;case 39:v.currentTime+=f.forwardUnit;break;case 40:v.muted=!1,t-=.1,v.volume=t<0?0:t}}})}function L(){this.paused?this.play():this.pause()}function F(e){var t=this,r=t.$sets,l=t.tip;l&&r.tip&&((r=t.timer)&&clearTimeout(r),l.innerHTML=e,l.classList.add("player-tip-on"),t.timer=setTimeout(function(){l.classList.remove("player-tip-on")},1500))}function S(e){var t=Math.floor(e/60),e=Math.floor(e%60);return(t=t<10?"0"+t:t)+":"+(e=e<10?"0"+e:e)}y.MASIV.player=function(r,l){return this.each(function(e){var t=e.$player;t?"function"==typeof t[r]&&t[r](l):new i(e,r)})},y("[masiv-player]").player()}(M,document);