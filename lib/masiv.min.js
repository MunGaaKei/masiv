!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.M=t()}(this,function(){var f=this.document,d=200,u="active",e="ontouchend"in f,a={beforeOpen:new CustomEvent("beforeOpen",{bubbles:!0,cancelable:!0}),open:new CustomEvent("open",{bubbles:!0,cancelable:!0}),beforeClose:new CustomEvent("beforeClose",{bubbles:!0,cancelable:!0}),close:new CustomEvent("close",{bubbles:!0,cancelable:!0})},p={ready:"DOMContentLoaded",mousewheel:/Firefox/i.test(navigator.userAgent)?"DOMMouseScroll":"mousewheel",mousedown:e?"touchstart":"mousedown",mouseup:e?"touchend":"mouseup",mousemove:e?"touchmove":"mousemove",click:e?"tap":"click"};e&&function(){x("tap"),x("swipeLeft"),x("swipeRight"),x("swipeUp"),x("swipeDown"),x("press");var s={};f.addEventListener("touchstart",function(e){e=e.touches[0];s={x:e.clientX,y:e.clientY,time:Date.now(),dx:0,dy:0}}),f.addEventListener("touchmove",g(function(e){e=e.touches[0];s.dx=e.clientX-s.x,s.dy=e.clientY-s.y},100)),f.addEventListener("touchend",function(e){var t=Date.now()-s.time,n=e.target,e=12;Math.abs(s.dx)<e&&Math.abs(s.dy)<e?(t<240&&n.dispatchEvent(a.tap),1e3<t&&n.dispatchEvent(a.press)):(s.dx>e&&n.dispatchEvent(a.swipeRight),s.dx<-e&&n.dispatchEvent(a.swipeLeft),s.dy>e&&n.dispatchEvent(a.swipeDown),s.dy<-e&&n.dispatchEvent(a.swipeUp)),s={}})}();var h=function(e){return new t(e)};h.extend=h.prototype.extend=m;var o,r,t=function(e,t){if(!e)return this;var n=this;if(t=t||f,"function"==typeof e)return t.addEventListener(p.ready,e),t;if("string"==typeof e){if("<"===e[0]){var s=f.createElement("DIV");return s.innerHTML=e,h(s.children)}for(var i=t.querySelectorAll(e),a=0,o=i.length;a<o;a++)n[a]=i[a];n.length=o}else if(e.length){for(a=0,o=e.length;a<o;a++)n[a]=e[a];n.length=o}else e.nodeType?(n[0]=e,n.length=1):m(n,e);return n};function n(){var s=this,e=s.classList;if(e.contains(u)||s.hasAttribute("disabled"))return!1;var i=s.querySelector(".dropmenu");if(!i)return!1;e.add(u);var a,t,n=s.getBoundingClientRect(),o="";e.contains("select")?(a=s.querySelector(".input"),i.onclick=function(e){for(var t=e.target;t!==i;){if(t.matches("[data-value]")){var n=i.querySelector("[selected]");n&&n.removeAttribute("selected"),a.value=t.dataset.value||"",t.setAttribute("selected","selected");break}t=t.parentNode}return b(s,!1),!1}):(t=(i.offsetWidth-n.width)/2,o+=n.left+i.offsetWidth<f.body.clientWidth?"":n.right+t<f.body.clientWidth?"left: -"+t+"px;":"right: 0"),i.style.cssText=o,e.add(IN_CLASS)}function s(e){var t;e&&(e.dispatchEvent(a.beforeClose),b((t=e.parentNode).classList.contains("backdrop")?t:e,!1),e.dispatchEvent(a.close))}function i(e){for(var t=e.target;t!==this;){if(t.matches("[masiv-tab]")){if(t.classList.contains(u))return!1;var n=t.parentNode,s=n.getAttribute("masiv-tabnavs"),i=n.querySelector("[masiv-tab]."+u),n=f.querySelector('[masiv-tabs="'+s+'"] [masiv-tab].'+u),s=f.querySelector('[masiv-tabs="'+s+'"] [masiv-tab="'+t.getAttribute("masiv-tab")+'"]');if(i&&i.classList.remove(u),n&&(n.classList.remove(u),n.dispatchEvent(a.close)),s){t.classList.add(u),s&&s.classList.add(u),s.dispatchEvent(a.open);break}}t=t.parentNode}}function c(e){for(var t,n=e.target;n!==this;){if(n.matches(".question")){!("one"===this.getAttribute("masiv-collapse"))||n.classList.contains(u)||(t=this.querySelector(".question."+u))&&t.classList.remove(u),n.classList.toggle(u);break}n=n.parentNode}}function l(e){e&&(e.classList.remove(u),setTimeout(function(){e.remove()},d))}function v(e,t,n,s){return"<a"+(s?' href="'+s+t+'"':"")+' class="'+e+'" data-page="'+t+'">'+n+"</a>"}function m(){var e,t,n=1,s=arguments.length,i=arguments[0],a=!1===arguments[s-1];if(s<1)return this;for("boolean"==typeof arguments[s-1]&&--s;n<s;n++)for(t in e=arguments[n])a&&t in i||(i[t]=e[t]);return i}function g(n,s,i){var a,o=!0;return s=s||250,function(){var e=arguments,t=this;a&&clearTimeout(a),o?(n.apply(t,e),o=!1,setTimeout(function(){o=!0},s)):!0!==i&&(a=setTimeout(function(){n.apply(t,e)},s))}}function b(e,t){var n=e.classList;e.getAttribute("masiv-toggable")||(e.setAttribute("masiv-toggable",!0),n&&n[t?"add":"remove"](u),e.removeAttribute("masiv-toggable"))}function x(e){return a[e]=new CustomEvent(e,{bubbles:!0,cancelable:!0})}return t.prototype={each:function(e){var t,n=0,s=this.length;if(s)for(;n<s;n++)e.call(this[n],this[n],n);else if(0!==s){var i=Object.keys(this);for(s=i.length;n<s;n++)t=i[n],e.call(this[t],this[t],t,n)}return this},on:function(t,s,i,e){return t=p[t]||t,"string"==typeof s?this.each(function(n){n.addEventListener(t,function(e){for(var t=e.target;t!==n;)t.matches(s)&&i.call(t,e),t=t.parentNode},e)}):this.each(function(e){e.addEventListener(t,s,i)}),this},off:function(t,n){return t=p[t]||t,this.each(function(e){e.removeEventListener(t,n)})},fire:function(t){return t=p[t]||t,this.each(function(e){a[t]=a[t]||new CustomEvent(t,{bubbles:!0,cancelable:!0}),e.dispatchEvent(a[t])})},tip:function(e){var t={active:"mouseenter",deactive:"mouseleave"};return e&&(t=m(t,e)),this.each(function(e){e.addEventListener(t.active,function(){!function(e){var t=e.html||this.getAttribute("masiv-tip"),n=h.pos(this),s=f.createElement("DIV");s.innerHTML=t+'<div class="tip-diamond"></div>',s.className="tip"+(e.color?" "+e.color:""),f.body.appendChild(s);var i=s.offsetHeight,a=s.offsetWidth,o=f.body.clientWidth,r=this.offsetWidth,c=(a-r)/2,l=n.left+r+c+10>o,u=n.left>=10+c,t=n.top>=i+40,i=t?n.top-i-10:n.top+i+10,c=u?l?o-a-10:n.left-c:10;s.lastChild.style.cssText="left:"+(u?n.left-c+r/2:l?a/2:n.left+r/2-10)+"px;top:"+(t?"100%;margin-top:-1px;":"1px;"),s.style.cssText="left:"+c+"px;top:"+i+"px;opacity:1;",this.addEventListener(e.deactive,function(){s.style.opacity=0,setTimeout(function(){s&&s.remove()},d)})}.call(e,t)})})},dialog:function(t){return this.each(function(e){(!1===t?s:function(e){var t=e.parentNode;if(t.classList.contains("backdrop"))e.dispatchEvent(a.beforeOpen),b(t,!0);else{var n=e.classList;if(n.contains(u))return;e.dispatchEvent(a.beforeOpen),n.add("transless"),e.style.cssText="";var s=e.getBoundingClientRect(),i=(t=t===f.body?f.documentElement:t).scrollTop+(s.height>=t.clientHeight?0:(t.clientHeight-s.height)/2),s=t.scrollLeft+(s.width>=t.clientWidth?0:(t.clientWidth-s.width)/2);e.style.cssText="left:"+s+"px;top:"+i+"px;",e.offsetWidth,n.remove("transless"),n.add(u)}e.dispatchEvent(a.open)})(e)})},collapse:function(){return this.on(p.click,c)},tabs:function(){return this.on(p.click,i)},page:function(t,n,s){return this.each(function(e){!function(e,t,n){e-=0,t-=0;var s="",i={siblings:2,pageClass:"page",active:u,dots:'<i class="iconfont icon-more"></i>'};n?(i=m(i,n),this.$settings=i):i=this.$settings||i;var a,o,r=i.siblings,c=i.href;if(!1===r)return a=1<e?e-1:1,o=e===t?t:e+1,s+=v(i.pageClass+" page-prev",a,i.prev||"上页",c),s+=v(i.pageClass+" page-next",o,i.next||"下页",c),void(this.innerHTML=s);s="<a"+(c?' href="'+c+e+'"':"")+' class="'+i.pageClass+" "+i.active+'">'+e+"</a>",++r;for(var l=1;l<r;l++)o=e+l,1<(a=e-l)&&(s=v(i.pageClass,a,a,c)+s),o<t&&(s+=v(i.pageClass,o,o,c));1<e-r?s=v(i.pageClass,1,1,c)+'<span class="page-dots">'+i.dots+"</span>"+s:1!=e&&(s=v(i.pageClass,1,1,c)+s);e+r<t?s+='<span class="page-dots">'+i.dots+"</span>"+v(i.pageClass,t,t,c):e!=t&&(s+=v(i.pageClass,t,t,c));i.prev&&(a=1<e?e-1:1,s=v(i.pageClass+" page-prev",a,i.prev||"上页",c)+s);i.next&&(o=e===t?t:e+1,s+=v(i.pageClass+" page-next",o,i.next||"下页",c));this.innerHTML=s,"function"==typeof i.click&&((n=this.$clickfn)||(this.$clickfn=n=function(e){for(var t=e.target;t!==this;){if(t.matches("[data-page]")){i.click.call(t,+t.dataset.page,t);break}t=t.parentNode}},this.addEventListener(p.click,n)))}.call(e,t,n,s)})},toggle:function(t){return this.each(function(e){b(e,t)})}},h.extend(h,{version:"1.0",MASIV:t.prototype,message:function(e){if(!e)return!1;if(1===e.nodeType)return l(e),!1;e="string"==typeof e?{html:e}:e,e=m({timeout:2019,max:3,dismiss:p.click},e);var t=f.getElementsByClassName("messages")[0];t||((t=f.createElement("DIV")).className="messages",f.body.append(t));var n=f.createElement("DIV");n.className=e.color?"message "+e.color:"message",n.innerHTML=e.html;var s=t.children,i=s.length;if(e.max&&e.max<=i)for(;i>=e.max;)l(s[--i]);0<i?t.insertBefore(n,s[0]):t.append(n),n.offsetWidth,n.classList.add(u),e.dismiss&&(e.timeout&&setTimeout(function(){l(n)},e.timeout),n.addEventListener(e.dismiss,function(){l(n)}));return n},ajax:function(e){if(!e||!e.url)return;e=m({method:"GET",asyn:!0,data:{},headers:{}},e);var t,n=new XMLHttpRequest;n.open(e.method,e.url,e.asyn);var s=e.headers;for(t in s)n.setRequestHeader(t,s[t]);n.onreadystatechange=function(){4===n.readyState&&(200===n.status&&e.success?e.success(n.responseText):e.error&&e.error(n),e.complete&&e.complete(),n=null)},n.send(e.data)},debounce:function(n,s,i){var a,o=!0;return s=s||250,function(){var e=arguments,t=this;i?o?(n.apply(t,e),o=!1):(a&&clearTimeout(a),a=setTimeout(function(){o=!0},s)):(a&&clearTimeout(a),a=setTimeout(function(){n.apply(t,e)},s))}},throttle:g,pos:function(e){"string"==typeof e&&(e=f.querySelector(e));var t=e.offsetTop,n=e.offsetLeft;for(;e.offsetParent;)e=e.offsetParent,t+=e.offsetTop,n+=e.offsetLeft;return{top:t,left:n}},time:function(e,t,n){if(e.getDate){var s={Y:e.getFullYear(),M:e.getMonth()+1,D:e.getDate(),h:e.getHours(),m:e.getMinutes(),s:e.getSeconds()};return(t=t||"Y-M-D h:m:s").replace(/Y|M|D|h|m|s/g,function(e){return e=s[e],!1!==n&&e<10?"0"+e:e})}return console.error(e,"is not an instance of Date()"),!1},guid:function(){var n=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=(n+16*Math.random())%16|0;return n=Math.floor(n/16),("x"===e?t:7&t|8).toString(16)})},eventAlias:p}),h(f).on(p.click,function(e){for(var t=e.target;9!==t.nodeType;){switch(!0){case t.matches(".dropmenu"):t=f.documentElement;break;case t.matches("[masiv-dropmenu]"):h("[masiv-dropmenu]."+u).each(function(e){b(e,!1)}),t.classList.contains(u)?b(t,!1):n.call(t),t=f.documentElement;break;case t===f.body:h("[masiv-dropmenu]."+u).each(function(e){b(e,!1)});break;case t.matches("[masiv-dialog]"):h(t.getAttribute("masiv-dialog")).dialog(),t=f.documentElement}t=t.parentNode}t=null}).on(p.click,function(e){e=e.target;!0===e.matches("[masiv-dismiss]")&&s(f.querySelector(e.getAttribute("masiv-dismiss")||"MASIV")),e=null},!0),h("[masiv-sidebar]").on(p.click,function(){var e=f.querySelector(this.getAttribute("masiv-sidebar"));b(e,!e.classList.contains(u))}),h(".sidebar").on(p.click,function(e){e.target===this&&b(this,!1)},!0),h("[masiv-tabnavs]").tabs(),h("[masiv-collapse]").collapse(),h("[masiv-tip]").tip(),f.querySelector("[masiv-drag]")&&(r=!1,h(f).on("mousedown","[masiv-drag]",function(e){(e=e.touches?e.touches[0]:e).preventDefault(),r=!0;for(var t=+this.getAttribute("masiv-drag"),n=this;t--;)n=n.parentNode;var s=window.getComputedStyle(n),i=+s.getPropertyValue("left").slice(0,-2),a=+s.getPropertyValue("top").slice(0,-2),s="static"===(s=s.getPropertyValue("position"))?"relative":s,i=isNaN(i)?0:i,a=isNaN(a)?0:a;n.setAttribute("masiv-dragging",!0),o={x:e.clientX,y:e.clientY,target:n,position:s,left:i,top:a}}).on("mousemove",function(e){r&&function(e){e.preventDefault();var t=(e=e.touches?e.touches[0]:e).clientX,e=e.clientY;t=(t=t>window.innerWidth?window.innerWidth:t)<0?0:t;t=this.left+t-this.x,e=this.top+e-this.y;return this.target.style.cssText="left:"+t+"px;top:"+e+"px;position:"+this.position,!1}.call(o,e)},{passive:!1}).on("mouseup",function(){o&&(r=!1,o.target.removeAttribute("masiv-dragging")),o=null})),h});